<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>pkg2</title>
    <script src="./umd/index.js"></script>
    <style>
      html,
      body {
        padding: 0;
        margin: 0;
      }
    </style>
  </head>

  <body>
    <video
      src="https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4"
      controls
      id="video"
    ></video>
    <div id="progress"></div>
    <script>
      (function () {
        const progress = new Pkg2.Progress({
          duration: 500, //
          current: 50,
          getContainer: document.getElementById("progress"),
        });

        const $video = document.getElementById("video");

        $video.addEventListener("progress", () => {
          if (video.buffered.length > 0) {
            // 获取缓冲的最后一个区间的结束时间
            const bufferedEnd = video.buffered.end(video.buffered.length - 1);
            const duration = video.duration;
            console.log(`视频的总时长：${duration}秒`);
            console.log(`已加载的部分长度：${bufferedEnd}秒`);
            console.log(`加载的百分比：${(bufferedEnd / duration) * 100}%`);

            progress.duration = duration;
            progress.buffered = bufferedEnd;
          }
        });
      })();
    </script>
  </body>
</html>
